# _Browser testing_

No mundo dos testes automatizados √© comum nos confundirmos sobre o que testar, e em vez de focarmos em testar a aplica√ß√£o sendo desenvolvida (ou mantida), testarmos o comportamento padr√£o do navegador.

Um erro comum √© clicar em um link s√≥ para verificar que fomos direcionados para a URL correta, ou para verificarmos que n√£o s√≥ fomos redirecionados para a URL correta, como tamb√©m que uma nova aba foi aberta no navegador.

√â comportamento padr√£o dos navegadores web que quando um usu√°rio clica em uma tag _anchor_ (`<a>Click here</a>`) o mesmo ser√° direcionado para a URL da propriedade `href` de tal elemento, e que caso tal elemento tenha a propriedade `target` com o valor `_blank`, quando clicado, tal URL ser√° aberta em um nova aba.

Ou seja, visto que tais comportamentos s√£o padr√£o em navegadores web, n√£o precisamos test√°-los. Os times desenvolvendo os navegadores j√° testam isso. ‚úÖ

Nossa preocupa√ß√£o deve ser que a aplica√ß√£o funciona, n√£o o navegador.

Com Cypress, facilmente podemos testar se um elemento HTML possui determinadas propriedades, tais como `href` ou `target`. Por exemplo, para verificar que um link possui o `href` com o valor `https://example.com`, basta encadear um `.should('have.attr', 'href', 'https://example.com')` ao `cy.get()` que identifica o elemento em quest√£o.

## Exerc√≠cio

Abra o arquivo [`cypress/integration/browser-testing/sample1.spec.js`](../cypress/integration/browser-testing/sample1.spec.js), e em vez de clicar link que cont√©m o texto `Login`, verifique somente que tal elemento possui o valor correto para a propriedade `href`, al√©m de verificar que tal elemento n√£o possui a propriedade `target`.

> üßô Dica: para verificar que uma propriedade n√£o existe voc√™ pode usar `.should('not.have.attr', 'target')`

**Obs.:** Lembre de executar o teste ap√≥s a mudan√ßa para garantir que funciona.

> Use `npx cypress run --spec cypress/integration/browser-testing/sample1.spec.js` para executar o teste em modo _headless_, ou `npm run cy:open`, para abrir o Cypress em modo interativo.

## _Extra credit 1_

Abra o arquivo [`cypress/integration/browser-testing/sample2.spec.js`](../cypress/integration/browser-testing/sample2.spec.js), e em vez de clicar no link da primeira `.table-row`, verifique que tal elemento possui os valores corretos para as propriedades `href` e `target`.

## _Extra credit 2_

Leia sobre testes em m√∫ltiplas abas na [documenta√ß√£o oficial do Cypress](https://docs.cypress.io/guides/references/trade-offs#Multiple-tabs) (em ingl√™s) e entenda o motivo para tal abordagem n√£o ser suportada.

___

Ufa! Uma m√° pr√°tica a menos. üòÖ

V√° para a [aula 2](./2.md) para conhecer a segunda m√° pr√°tica (duplica√ß√£o de c√≥digo), e como lidar com ela.
